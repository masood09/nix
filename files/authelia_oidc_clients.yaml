# Hashed client secrets go here, and unhashed ones go in the client configurations

identity_providers:
  oidc:
    clients:
      # https://immich.app/docs/administration/oauth/
      - client_name: "Immich"
        client_id: {{ secret "/run/secrets/authelia-immich-oidc-client-id" | mindent 10 "|" | msquote }}
        client_secret: {{ secret "/run/secrets/haddock/immich/authelia-immich-oidc-client-secret" | mindent 10 "|" | msquote }}
        public: false
        authorization_policy: "one_factor"
        redirect_uris:
            - "app.immich:///oauth-callback"
            - "https://photos.mantannest.com/auth/login"
            - "https://photos.mantannest.com/user-settings"
        scopes:
            - "openid"
            - "profile"
            - "email"
        token_endpoint_auth_method: "client_secret_post"
      # https://docs.karakeep.app/configuration/#authentication--signup
      - client_name: "Karakeep"
        client_id: {{ secret "/run/secrets/authelia-karakeep-oidc-client-id" | mindent 10 "|" | msquote }}
        client_secret: {{ secret "/run/secrets/haddock/authelia-karakeep-oidc-client-secret" | mindent 10 "|" | msquote }}
        public: false
        authorization_policy: "one_factor"
        claims_policy: "karakeep"
        redirect_uris:
          - "https://keep.mantannest.com/api/auth/callback/custom"
        scopes:
          - "openid"
          - "profile"
          - "email"
        userinfo_signed_response_alg: "none"
        token_endpoint_auth_method: "client_secret_basic"
